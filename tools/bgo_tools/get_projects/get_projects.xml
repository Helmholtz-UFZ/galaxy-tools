<tool id="lm_get_projects" name="Get LMDB Projects" version="0.1.0+galaxy0" profile="21.05">
    <requirements>
        <requirement type="package" version="2.2.2">pandas</requirement>
        <requirement type="package" version="2.9.10">psycopg2</requirement>
        <requirement type="package" version="2.0.37">sqlalchemy</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        python $__tool_directory__/get_projects.py
        --credentials-file $credentials
        --login-name $login
        --output-file $projects
    ]]></command>
    <inputs>
        <param type="data" format="json" name="credentials" label="Credentials File" help="LMDB credentials file containing..." optional="false"/>
        <param name="login" optional="false" type="text" label="UFZ Login Name" help="Lambda-Miner login name which equals the UFZ login name."/>
    </inputs>
    <outputs>
        <data name="projects" format="tabular" label="Projects"/>
    </outputs>
    <tests>
        <test>
            <param name="credentials" value="test_credentials.json"/>
            <param name="login" value="dummy_bgo"/>
            <output name="projects" file="test_projects.csv" ftype="csv" compare="contains"/>
        </test>
    </tests>
    <help><![CDATA[
**What it does**

This tool queries the Lambda-Miner database for the users projects.

**Input**

There is no input necessary from the user. The tool connects to the Lambda-Miner database and uses the users login name to query it.

**Output**

CSV file containing the projects (id, name, sample count) corresponding to the user.]]>
    </help>
    <citations>
        <citation type="doi">10.5194/egusphere-egu24-15782</citation>
    </citations>
</tool>
