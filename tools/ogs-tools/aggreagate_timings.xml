<tool id="aggregate_timings" name="Aggregate Timings" version="0.1.0+galaxy0" python_template_version="3.5" profile="21.05">
    <description>
        Konvertiert JSON-Dateien in CSV.
    </description>
    <requirements>
        <requirement type="package" version="3.9">python</requirement>
        <requirement type="package" version="1.9.1">argparse</requirement>
        <requirement type="package" version="3.8">subprocess</requirement>
        <requirement type="package" version="3.9">shlex</requirement>
        <requirement type="package" version="2.0.9">json</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        python3 aggregate_timings.py --root "$root" --csv_output "$csv_output"
       
    ]]></command>
    <inputs>
        <param argument="root" type="text" optional="false" label="root"/>
        <param argument="csv_output" type="data" format="txt" optional="false" label="csv_output"/>
    </inputs>
    <outputs>
        <data name="output_data" format="txt" />
    </outputs>
    <tests>
        <test>
            <param name="root" value="data/" />
            <param name="csv_output" value="test_output.csv" />
            <output name="output_data" value="test_output.csv" />
        </test>
    </tests>
    <help><![CDATA[
        This tool searches through a specified directory for JSON files ending with `_total_timings.json`, extracts timing information, and writes the results to a CSV file.

        **Parameters:**
        - **Root Directory (`root`)**: The directory where the search for JSON files will start.
        - **CSV Output (`csv_output`)**: The CSV file where the extracted data will be saved.

        **Functionality:**
        - The tool recursively searches the specified root directory and all its subdirectories.
        - It identifies and processes JSON files that end with `_total_timings.json`.
        - Extracted timing data is sorted by test case and written to the output CSV file.

        **Notes:**
        - The separator used in the CSV file is a tab (`\t`).
        - Only the first value in any list found in the JSON files is included in the CSV file.
    ]]></help>
    <citations>
        <citation type="doi">UFZ</citation>
    </citations>
</tool>