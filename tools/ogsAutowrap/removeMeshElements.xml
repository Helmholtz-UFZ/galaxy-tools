<tool name="OGS: removeMeshElements" id="ogs_removemeshelements" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="22.01">
  <description>Galaxy wrapper for the OGS utility 'removeMeshElements'.</description>
  <macros>
    <import>macros.xml</import>
    <import>test_macros.xml</import>
  </macros>
  <expand macro="requirements"/>
  <version_command><![CDATA[removeMeshElements --version]]></version_command>
  <command><![CDATA[for i in $mesh_input_file; do if [ "$i" != "None" ] && [ ! -e "$(basename $i)" ]; then ln -s "$i" "$(basename $i)"; fi; done;
removeMeshElements
    $invert
#if str($z_max).strip() != 'None' and str($z_max).strip() != '':
    --z-max '$z_max'
#end if
#if str($z_min).strip() != 'None' and str($z_min).strip() != '':
    --z-min '$z_min'
#end if
#if str($y_max).strip() != 'None' and str($y_max).strip() != '':
    --y-max '$y_max'
#end if
#if str($y_min).strip() != 'None' and str($y_min).strip() != '':
    --y-min '$y_min'
#end if
#if str($x_max).strip() != 'None' and str($x_max).strip() != '':
    --x-max '$x_max'
#end if
#if str($x_min).strip() != 'None' and str($x_min).strip() != '':
    --x-min '$x_min'
#end if
    $zero_volume
    --element-type '$element_type'
#if str($property_name).strip() != 'None' and str($property_name).strip() != '':
    --property-name '$property_name'
#end if
#if str($property_value).strip() != 'None' and str($property_value).strip() != '':
    --property-value '$property_value'
#end if
#if str($min_value).strip() != 'None' and str($min_value).strip() != '':
    --min-value '$min_value'
#end if
#if str($max_value).strip() != 'None' and str($max_value).strip() != '':
    --max-value '$max_value'
#end if
    $outside
    $inside
    --mesh-input-file '$mesh_input_file.element_identifier'
    --mesh-output-file output_1.vtu]]></command>
  <inputs>
    <param name="invert" type="boolean" label="invert" help="inverts the specified bounding box" checked="false" truevalue="--invert" falsevalue=""/>
    <param name="z_max" type="float" value="1.7976931348623157E+308" optional="true" label="z max" help="largest allowed extent in z-dimension"/>
    <param name="z_min" type="float" value="-1.7976931348623157E+308" optional="true" label="z min" help="smallest allowed extent in z-dimension"/>
    <param name="y_max" type="float" value="1.7976931348623157E+308" optional="true" label="y max" help="largest allowed extent in y-dimension"/>
    <param name="y_min" type="float" value="-1.7976931348623157E+308" optional="true" label="y min" help="smallest allowed extent in y-dimension"/>
    <param name="x_max" type="float" value="1.7976931348623157E+308" optional="true" label="x max" help="largest allowed extent in x-dimension"/>
    <param name="x_min" type="float" value="-1.7976931348623157E+308" optional="true" label="x min" help="smallest allowed extent in x-dimension"/>
    <param name="zero_volume" type="boolean" label="zero volume" help="remove zero volume elements" checked="false" truevalue="--zero-volume" falsevalue=""/>
    <param name="element_type" type="select" label="element type" help="element type to be removed">
      <option value="point">point</option>
      <option value="line">line</option>
      <option value="tri">tri</option>
      <option value="quad">quad</option>
      <option value="hex">hex</option>
      <option value="prism">prism</option>
      <option value="tet">tet</option>
      <option value="pyramid">pyramid</option>
    </param>
    <param name="property_name" type="text" value="MaterialIDs" optional="true" label="property name" help="property in the mesh"/>
    <param name="property_value" type="integer" value="PROPERTY_VALUE" optional="true" label="property value" help="value of selected property to be removed"/>
    <param name="min_value" type="float" value="0" optional="true" label="min value" help="minimum value of range for selected property"/>
    <param name="max_value" type="float" value="0" optional="true" label="max value" help="maximum value of range for selected property"/>
    <param name="outside" type="boolean" label="outside" help="remove all elements outside the given property range" checked="false" truevalue="--outside" falsevalue=""/>
    <param name="inside" type="boolean" label="inside" help="remove all elements inside the given property range" checked="false" truevalue="--inside" falsevalue=""/>
    <param name="mesh_input_file" type="data" optional="false" label="mesh input file" help="Input (.vtu). the file containing the input mesh" format="vtkxml" multiple="false"/>
  </inputs>
  <outputs>
    <data name="output_removeMeshElements" format="vtkxml" label="Output file from removeMeshElements" from_work_dir="output_1.vtu" hidden="false"/>
  </outputs>
  <tests>
    <expand macro="removemeshelements_test"/>
  </tests>
  <help><![CDATA[This tool runs the **removeMeshElements** utility from the OpenGeoSys suite.]]></help>
  <expand macro="citations"/>
</tool>
