<tool id="shp2msh" name="shp2msh_converter" version="0.1.0+galaxy0" python_template_version="3.5" profile="21.05">
    <requirements>
        <requirement type="package" version="0.0.3">ogstools</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        export SHAPE_RESTORE_SHX=YES &&    
        ln -s '$input_shp' input.shp &&
        cat input.shx > /home/stehling/ogs_tools/content_of_input.txt &&
        shp2msh --input input.shp --output output.vtu
        #if str($cellsize)!="":
            --cellsize '$cellsize'
        #end if
        '$meshing'
        '$simplify'
    ]]></command>
    <inputs>
        <param name="input_shp" type="data" format="shp" label="shp input data" argument="-i"/>
        <param name="cellsize" type="float" min="40" optional="true" label="cellsize" argument="-c"/>
        <param name="meshing" type="select"  label="meshing">
            <option value="triangle" selected="true">Triangle</option>
            <option value="gmsh">Gmsh</option>
        </param>
        <param name="simplify" type="select" label="simplify">
            <option value="simplified">Simplified</option>
            <option value="original" selected="true">Original</option>
        </param>
    </inputs>
    <outputs>
        <data name="output" format="xml" label="output_data"/>
    </outputs>
    <tests>
        <test>
            <param name="input_shp" value="/home/stehling/ogs_tools/test-data/circle.shp"/>
            <param name="cellsize" value="500.0"/>
            <param name="meshing" value= "triangle"/>
            <param name="simplify" value="simplified"/>
            <output name="output" value="output.vtu"/>
        </test>
    </tests>
    <help><![CDATA[
        This tool takes a shapefile as input and creates a mesh using either the Triangle or GMSH method.
        The cellsize can be optionally specified, and the shapefile can be simplified before meshing.
        Output data has the format .vtu/ .vtk.
    ]]></help>
    <citations>
        <citation type="doi">10.5281/zenodo.13685289</citation>
    </citations>
</tool>